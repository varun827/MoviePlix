<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MoviePlix</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <header>
    <img src="logo.png" alt="MoviePlix Logo" class="site-logo" />
  </header>
  
  

  <div class="search-container">
    <input type="text" id="movieInput" placeholder="Search a movie..." />
    <button onclick="searchMovies()">Search</button>
  </div>

  <h2>‚≠ê Top Rated Movies</h2>
  <div class="movie-grid" id="topRatedMovies"></div>

  <div id="movieInfo"></div>

  <script>
    const tmdbApiKey = 'fdf93abc60745ca57ef10f0cc2533025';

    async function searchMovies() {
      const query = document.getElementById('movieInput').value.trim();
      const grid = document.getElementById('topRatedMovies');
      grid.innerHTML = '';

      if (!query) return;

      const response = await fetch(`https://api.themoviedb.org/3/search/movie?api_key=${tmdbApiKey}&query=${encodeURIComponent(query)}`);
      const data = await response.json();

      if (data.results.length === 0) {
        grid.innerHTML = '<p>No movies found.</p>';
        return;
      }

      data.results.forEach(movie => {
        const poster = movie.poster_path
          ? `https://image.tmdb.org/t/p/w500${movie.poster_path}`
          : 'https://via.placeholder.com/160x240?text=No+Image';

        const card = document.createElement('div');
        card.className = 'movie-card';
        card.style = "background:#1a1a1a;padding:10px;width:160px;border-radius:10px;cursor:pointer;";
        card.innerHTML = `
          <img src="${poster}" alt="${movie.title}" style="width:100%;border-radius:10px;" />
          <p>${movie.title}</p>
        `;
        card.onclick = () => showMovieDetails(movie.id);
        grid.appendChild(card);
      });
    }

    async function loadTopRatedMovies() {
      const response = await fetch(`https://api.themoviedb.org/3/movie/top_rated?api_key=${tmdbApiKey}&language=en-US&page=1`);
      const data = await response.json();
      const grid = document.getElementById('topRatedMovies');

      data.results.slice(0, 8).forEach(movie => {
        const poster = movie.poster_path
          ? `https://image.tmdb.org/t/p/w500${movie.poster_path}`
          : 'https://via.placeholder.com/160x240?text=No+Image';

        const card = document.createElement('div');
        card.className = 'movie-card';
        card.style = "background:#1a1a1a;padding:10px;width:160px;border-radius:10px;cursor:pointer;";
        card.innerHTML = `
          <img src="${poster}" alt="${movie.title}" style="width:100%;border-radius:10px;" />
          <p>${movie.title}</p>
        `;
        card.onclick = () => showMovieDetails(movie.id);
        grid.appendChild(card);
      });
    }

    async function showMovieDetails(movieId) {
      const response = await fetch(`https://api.themoviedb.org/3/movie/${movieId}?api_key=${tmdbApiKey}&language=en-US`);
      const movie = await response.json();

      const poster = movie.poster_path
        ? `https://image.tmdb.org/t/p/w500${movie.poster_path}`
        : 'https://via.placeholder.com/300x450?text=No+Image';

      // Clear full page content
      document.body.innerHTML = `
        <div class="movie-details">
          <img src="${poster}" alt="${movie.title}">
          <h2>${movie.title} (${movie.release_date.split('-')[0]})</h2>
          <p><strong>‚≠ê Rating:</strong> ${movie.vote_average}</p>
          <p><strong>Genres:</strong> ${movie.genres.map(g => g.name).join(', ')}</p>
          <p><strong>Overview:</strong> ${movie.overview}</p>
          <button class="back-btn" onclick="window.location.reload()">üîô Back to Home</button>
        </div>
      `;
    }

    // Load top rated on page load
    loadTopRatedMovies();
  </script>

</body>
<footer>
  <div class="footer-content">
    <p>&copy; 2025 MoviePlix. All rights reserved.</p>
    <div class="footer-links">
      <a href="#">About Us</a>
      <a href="#">Help</a>
      <a href="#">Contact</a>
      <a href="#">Terms</a>
      <a href="#">Privacy</a>
    </div>
  </div>
</footer>
</html>
